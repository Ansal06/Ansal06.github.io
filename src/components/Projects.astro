---
import { siteConfig } from "../config";
const projects = siteConfig.projects;
---

<!-- Filter bar -->
<div class="flex gap-3 mb-10 flex-wrap">
  <button class="filter-pill active">All</button>
  <button class="filter-pill">Gravitational Waves</button>
</div>

<!-- Grid -->
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
  {projects.map((project) => (
  <article class="project-card" data-category={project.category}>

    <!-- Image -->
    {project.image && (
      <img src={project.image} alt={project.name}class="mx-auto block" />
    )}

    <!-- Content -->
    <div class="project-body">
      <div class="project-meta">
        <span class="project-tag">{project.category}</span>
      </div>

      <h3 class="project-title">{project.name}</h3>

      <p class="project-desc">
        {project.description}
      </p>

      <div class="project-tags">
        {project.skills.map((tag) => (
          <span class="tag-pill">{tag}</span>
        ))}
      </div>

      {project.date && (
        <p class="project-date">{project.date}</p>
      )}
    </div>

    <!-- GitHub Icon -->
    {project.github && (
      <a
        href={project.github}
        target="_blank"
        rel="noopener noreferrer"
        class="project-github"
        aria-label="GitHub Repository"
      >
        <svg viewBox="0 0 24 24" class="github-icon">
          <path
            fill="currentColor"
            d="M12 .5a12 12 0 00-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1.1-.8.1-.8.1-.8 1.2.1 1.9 1.2 1.9 1.2 1.1 1.9 2.9 1.4 3.6 1.1.1-.8.4-1.4.8-1.7-2.7-.3-5.6-1.4-5.6-6.1 0-1.4.5-2.6 1.3-3.5-.1-.3-.6-1.6.1-3.3 0 0 1.1-.3 3.5 1.3a12.3 12.3 0 016.3 0c2.4-1.6 3.5-1.3 3.5-1.3.7 1.7.2 3 .1 3.3.8.9 1.3 2.1 1.3 3.5 0 4.7-2.9 5.8-5.6 6.1.5.4.9 1.2.9 2.4v3.6c0 .3.2.7.8.6A12 12 0 0012 .5z"
          />
        </svg>
      </a>
    )}

  </article>
))}

<script>
  const pills = document.querySelectorAll(".filter-pill");
  const cards = document.querySelectorAll(".project-card");

  pills.forEach(pill => {
    pill.addEventListener("click", () => {
      const filter = pill.textContent.trim();

      // Toggle active pill
      pills.forEach(p => p.classList.remove("active"));
      pill.classList.add("active");

      // Show/hide cards
      cards.forEach(card => {
        const category = card.dataset.category;
        card.style.display =
          filter === "All" || category === filter ? "flex" : "none";
      });
    });
  });
</script>

<style>
.filter-pill {
  padding: 6px 14px;
  border-radius: 999px;
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--subtext);
  font-size: 0.9rem;
  transition: all 0.3s ease;
}

.filter-pill:hover {
  border-color: var(--accent-color);
  color: var(--text);
}

.filter-pill.active {
  background: color-mix(in srgb, var(--accent-color) 20%, var(--card));
  border-color: var(--accent-color);
  color: var(--text);
}

.project-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.project-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 0 20px color-mix(in srgb, var(--accent-color) 20%, transparent);
}

.project-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.project-body {
  padding: 22px;
}

.project-title {
  font-size: 1.2rem;
  font-weight: 600;
  margin-top: 8px;
  color: var(--text);
}

.project-desc {
  margin-top: 10px;
  font-size: 0.95rem;
  color: var(--subtext);
  line-height: 1.5;
}

.project-tags {
  margin-top: 14px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tag-pill {
  font-size: 0.75rem;
  padding: 4px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-color) 15%, var(--card));
  border: 1px solid color-mix(in srgb, var(--accent-color) 40%, var(--border));
  color: var(--text);
}

.project-date {
  margin-top: 14px;
  font-size: 0.75rem;
  color: var(--subtext);
}

.project-card {
  position: relative; /* important for icon positioning */
}

/* GitHub button */
.project-github {
  position: absolute;
  bottom: 14px;
  right: 14px;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--subtext);
  transition: all 0.3s ease;
}

.project-github:hover {
  color: var(--accent-color);
  border-color: var(--accent-color);
  box-shadow: 0 0 12px color-mix(in srgb, var(--accent-color) 50%, transparent);
  transform: translateY(-2px);
}

.github-icon {
  width: 18px;
  height: 18px;
}


</style>

