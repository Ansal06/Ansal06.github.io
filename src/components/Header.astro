---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects?.length > 0;
/* const hasExperience = siteConfig.experience?.length > 0; */
const hasEducation = siteConfig.education?.length > 0;
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <nav class="max-w-6xl mx-auto px-8 py-6 flex items-center justify-center gap-10">

    <!-- Moon logo (left of nav, like his) -->
    <div class="absolute left-8">
      <span id="theme-logo" class="text-xl text-[var(--text)]">☾</span>
    </div>

    <!-- Centered navigation -->
    <ul class="flex items-center gap-10 text-[var(--text)] font-medium">

      <a href="/" class="nav-link">Home</a>
      <li><a href="/#about" class="nav-link">About</a></li>

      {hasProjects && <li><a href="/projects" class="nav-link">Projects</a></li>}


      {hasEducation && <li><a href="/education" class="nav-link">Education</a></li>}
    </ul>

    <!-- Theme toggle on right -->
    <div class="absolute right-8">
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
  <div class="toggle-track">
    <div class="toggle-thumb">
      <span class="toggle-icon">☾</span>
    </div>
  </div>
</button>

<nav class="max-w-6xl mx-auto px-6 sm:px-8 py-4 sm:py-6 flex items-center justify-center relative">

  <div class="absolute left-6 hidden sm:block">
    <span id="theme-logo" class="text-xl text-[var(--text)]">☾</span>
  </div>

  <ul class="hidden sm:flex items-center gap-10 text-[var(--text)] font-medium">
    <li><a href="/" class="nav-link">Home</a></li>
    <li><a href="/#about" class="nav-link">About</a></li>
    {hasProjects && <li><a href="/projects" class="nav-link">Projects</a></li>}
    {hasEducation && <li><a href="/education" class="nav-link">Education</a></li>}
  </ul>

  <div class="absolute right-6 hidden sm:block">
    <!-- theme toggle button -->
  </div>

</nav>


  </nav>
</header>

<script>
  const html = document.documentElement;
  const toggleBtn = document.getElementById("theme-toggle");
  const toggleIcon = toggleBtn.querySelector(".toggle-icon");
  const logoIcon = document.getElementById("theme-logo");

  function setTheme(theme) {
    html.classList.toggle("light", theme === "light");
    localStorage.setItem("theme", theme);

    const isLight = theme === "light";
    toggleBtn.classList.toggle("light", isLight);

    // Toggle button icon
    toggleIcon.textContent = isLight ? "☀" : "☾";

    // Left header logo icon
    if (logoIcon) {
      logoIcon.textContent = isLight ? "☀" : "☾";
    }
  }  // ← this closing brace was missing in your file

  // Load saved theme
  const savedTheme = localStorage.getItem("theme") || "dark";
  setTheme(savedTheme);

  // Toggle on click
  toggleBtn.addEventListener("click", () => {
    const current = html.classList.contains("light") ? "light" : "dark";
    setTheme(current === "light" ? "dark" : "light");
  });

  // Header blur on scroll
  window.addEventListener("scroll", () => {
    const header = document.getElementById("header");
    if (window.scrollY > 60) header.classList.add("header-blur");
    else header.classList.remove("header-blur");
  });
</script>

<style>
.nav-link {
  color: var(--subtext);
  transition: color 0.3s ease;
}

.nav-link:hover {
  color: var(--accent-color);
}

.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
}

.toggle-track {
  width: 52px;
  height: 26px;
  border-radius: 999px;
  background: var(--card);
  border: 1px solid var(--border);
  position: relative;
  transition: all 0.3s ease;
}

.toggle-thumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  background: var(--accent-color);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  transition: transform 0.3s ease;
}

/* Slide in light mode */
.theme-toggle.light .toggle-thumb {
  transform: translateX(26px);
  background: #fbbf24
}

/* Hover glow */
.theme-toggle:hover .toggle-track {
  box-shadow: 0 0 12px color-mix(in srgb, var(--accent-color) 50%, transparent);
}

/* Icon color fix */
.toggle-icon {
  color: white;
}

/* In light mode, make sun icon dark */
.theme-toggle.light .toggle-icon {
  color: #0f172a;
}

/* Scroll blur */
.header-blur {
  background-color: color-mix(in srgb, var(--bg) 85%, transparent);
  backdrop-filter: blur(10px);
}
</style>
